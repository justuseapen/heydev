# Ralph Progress Log
Started: Wed Jan 14 20:54:32 EST 2026
---

## Codebase Patterns
- Production server container: `server-swockw8oo88ow0w0ocgc4ggw-013759300420`
- Database volume: `/var/lib/docker/volumes/swockw8oo88ow0w0ocgc4ggw_heydev-data/_data/heydev.db`
- drizzle-kit is not available in production container, must apply migrations manually with Node.js + better-sqlite3
- Auth endpoint is at `/api/auth/magic-link`, not `/api/auth/login`
- Health check endpoint: `GET /health` returns `{"status":"ok"}`

---

## Wed Jan 15 2026 - US-001
- **What was implemented**: Ran all database migrations (0000-0003) on production
- **Files changed**: No code changes - database operations only on production
- **Approach**:
  1. SSH'd into production server at 172.252.211.242
  2. Found HeyDev container via `docker ps`
  3. Discovered database was empty (no tables existed)
  4. Applied all 4 migrations (0000-0003) manually using Node.js script with better-sqlite3
  5. Verified users table has new columns: `setup_step` and `setup_completed_at`
  6. Restarted server container
  7. Verified server is healthy via `/health` endpoint
- **Learnings for future iterations:**
  - Production container doesn't have drizzle-kit installed (dev dependency not included)
  - Must use Node.js with better-sqlite3 to run migrations in container
  - Migrations use `--> statement-breakpoint` separator between SQL statements
  - Database uses WAL mode (heydev.db-wal and heydev.db-shm files present)
---
